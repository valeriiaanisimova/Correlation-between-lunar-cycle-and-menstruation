<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏–∑ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/suncalc@1.9.0/suncalc.min.js"></script>
</head>
<body>
    <div class="main-container">
        <button class="switch-btn" onclick="openMoonModal()" style="display: block; background: #443966;"></button>

        <h1>–ê–Ω–∞–ª–∏–∑ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤</h1>

        <div class="chart-switcher">
            <button class="switch-btn active" id="show-cycle-chart">–ì—Ä–∞—Ñ–∏–∫ —Ü–∏–∫–ª–æ–≤</button>
            <button class="switch-btn" id="show-correlation-chart">–ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏</button>
        </div>

        <div class="dates">
            <span>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</span>
            <input type="date" class="date-input" id="main-date">
        </div>
        
        <div class="main-content">
            <div class="charts-section">
                <div class="chart-wrapper" id="cycle-chart-wrapper">
                    <div class="controls">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</h3>
                        <div class="checkbox-group" id="checkboxes"></div>
                        <div class="button-group">
                            <button onclick="selectAllCycle()">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ—Ö</button>
                            <button onclick="deselectAllCycle()">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="cycle-chart"></canvas>
                        <div id="overlay"></div>
                    </div>
                </div>

                <div class="chart-wrapper correlation" id="correlation-chart-wrapper" style="display: none;">
                    <div class="controls">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</h3>
                        <div class="checkbox-group" id="participants-checkbox"></div>
                        <button id="select-all">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ—Ö</button>
                        <button id="deselect-all">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                    </div>
                    <div class="chart-container">
                        <canvas id="correlation-chart"></canvas>
                    </div>
                    <div class="button-group" style="justify-content: center">
                        <button onclick="openAnalysisModal()" class="switch-btn"> –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑</button>
                    </div>
                </div>



                <div class="modal" id="moonModal">
                    <div class="modal-content">
                        <button class="close-btn" onclick="closeMoonModal()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 6L6 18M6 6L18 18" stroke="#F3F0FF" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <div class="date-top-right" id="today-date"></div>
                        <h1 style="color: #F3F0FF;">üåú –õ—É–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</h1>
    
                        <div class="date-input-container">
                            <input type="date" class="date-input" id="modal-date">
                        </div>
    

                        <div class="section">
                            <div class="section-title">–ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è</div>
                            <ul id="menstruation-list"></ul>
                            <div class="empty-state" id="menstruation-empty">–ù–∏ —É –∫–æ–≥–æ –Ω–µ—Ç –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</div>
                        </div>

                        <div class="section">
                            <div class="section-title">–û–≤—É–ª—è—Ü–∏—è</div>
                            <ul id="ovulation-list"></ul>
                            <div class="empty-state" id="ovulation-empty">–ù–∏ —É –∫–æ–≥–æ –Ω–µ—Ç –æ–≤—É–ª—è—Ü–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</div>
                        </div>

                        <div class="moon-phase" id="moon-phase">
                            <div>–§–∞–∑–∞ –ª—É–Ω—ã: <span id="moon-phase-text">...</span></div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal" id="analysisModal">
                <div class="modal-content" style="max-width: 800px; height: 80vh; display: flex; flex-direction: column;">
                    <button class="close-btn" onclick="closeAnalysisModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18M6 6L18 18" stroke="#F3F0FF" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="toggleExpandBtn" class="expand-btn">
                        <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è -->
                        <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path xmlns="http://www.w3.org/2000/svg" d="M14 10L21 3M21 3H15M21 3V9M10 14L3 21M3 21H9M3 21L3 15" stroke="#F3F0FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è -->
                        <svg class="collapse-icon" width="20" height="20" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path xmlns="http://www.w3.org/2000/svg" d="M19.1429 10H14M14 10V4.85714M14 10L20 4" stroke="#F3F0FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path xmlns="http://www.w3.org/2000/svg" d="M4.99996 14H9.99996M9.99996 14V19M9.99996 14L4 20" stroke="#F3F0FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </button>
                    <h2 style="color: #F3F0FF; margin-bottom: 20px;">–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h2>
                    <div class="conclusion" id="conclusion"></div>
                </div>
            </div>

</body>

</html>